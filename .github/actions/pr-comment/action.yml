name: PR Comment

on:
  workflow_call:
    inputs:
      comment:
        type: string
        required: true

      error:
        type: string
        required: false
        default: ''

runs:
  using: composite
  steps:
    - uses: actions/github-script@v7
      with:
        script: |
          github.rest.issues.createComment({
             issue_number: context.issue.number,
             owner: context.repo.owner,
             repo: context.repo.repo,
             body: '⚠️ Terraform formatting issues were found. Please run `terraform fmt -recursive` locally and commit the changes.'
          })

          core.setFailed(inputs.error || inputs.comment)
